<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>실습문제_closure</title>
</head>

<body>
	<h4>@실습문제1 : 눈코딩</h4>
	<button onclick="aoo()();">aoo</button> <!-- aoo()도 함수를 반환하기 때문에 aoo()() 가능 -->
	<button onclick="boo()();">boo1</button>
	<button onclick="boo()(999);">boo2</button>
	<button onclick="coo(3)(5);">coo1</button>
	<button onclick="coo()(5);">coo2</button>
	<script>
		const a = 1;
		const aoo = () => {
			const a = 100;
			return () => console.log(a); // a값을 찾을 때 내부 -> 외부 -> 전역 순으로 찾음
										// 내부 a값이 존재하기 때문에 100을 가지고 리턴됨
		}

		const b = 9; // 전역변수
		const boo = () => {
			const b = 99; // 지역변수
			return (b) => console.log(b); // 매개변수 b(지역변수)를 가지는 함수가 리턴됨
		}

		const coo = (c) => { // coo()(5); 일 경우 c 값을 안줬기에 c : undifined 상태
			return (n) => {
				console.log(c * n); // 자유변수 c
			}
		}
	</script>

	<h3>@실습문제2</h3>
	<!-- 
	임의의 숫자를 더해가는 가산기를 만들어보자. 
	사용자는 input#myadder를 통해 값을 입력하고, 
	가산기는 입력값만큼 증가시켜서 #result에 현재까지의 합을 출력.
-->
	</pi>
	<fieldset>
		<legend>가산기</legend>
		<input type="number" id="myadder" placeholder="숫자를 입력하세요.">
		<button onclick="addFunc();">+</button>
		<p id="result"></p>
	</fieldset>

	<script>
		const mkAddFunc = () => {
			let sum = 0; // 자유변수 (클로져)
			return () => {
				// 숫자, '', null은 false 반환. 문자열, undefined등 숫자변환불가인 값은 true를 반환 
				if (isNaN(myadder.value)) return;
				//input타입과 상관없이 value의 타입은 string임.
				sum += Number(myadder.value);
				result.innerHTML = sum;
			};
		};
		const addFunc = mkAddFunc();

	</script>
</body>

</html>